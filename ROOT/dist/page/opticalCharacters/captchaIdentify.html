<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <script>
    try {
      if (isindex) {
      }
    } catch (e) {
      window.location.href = "/dist/index.html";
    }
  </script>
  <link rel="stylesheet" href="/dist/assets/css/opticalCharacters/index.css" />
  <link href="/dist/assets/css/public.css" rel="stylesheet" />
  <script src="/dist/assets/anycharts/anychart-base.min.js"></script>
  <style>
    .col-tab-list-2 .btn {
      padding: 2px 0.75rem !important;
    }

    .btn-success {
      background-color: #00e295;
      border-color: #00e295;
    }

    .btn-danger {
      background-color: #fd445f;
      border-color: #fd445f;
    }

    .captcha_pick {
      margin-top: 25px;
    }

    .pick_all span {
      margin-left: 5px;
      color: rgba(80, 80, 80, 1);
    }

    .radio {
      width: 1rem;
      height: 1rem;
      border-radius: 0.3rem;
    }

    .radio_btn {
      display: flex;
      align-items: center;
    }

    .radio_list {
      display: flex;
      flex-wrap: wrap;
    }

    .radio_item {
      width: 25%;
      margin-top: 20px;
    }

    .captcha {
      height: 80px;
    }

    .captcha img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    .pick_box {
      margin-top: 12px;
      text-align: center;
    }

    .upload_btn {
      width: 88px;
      height: 39px;
      border: 1px solid rgba(204, 204, 204, 1);
      position: relative;
      line-height: 39px;
      text-align: center;
    }

    #upload_file {
      width: 88px;
      height: 39px;
      position: absolute;
      left: 0;
      top: 0;
      opacity: 0;
    }

    .upload_captcha {
      margin-top: 25px;
      height: 200px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .upload_image {
      width: 304px;
      height: 124px;
    }

    .upload_image img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    .hide_upload {
      display: none;
    }
  </style>
</head>

<body>
  <div>
    <div class="row page-title align-items-center">
      <div class="col-sm-4 col-xl-6">
        <h4 class="mb-1 mt-0">验证码识别</h4>
      </div>
      <div class="col-sm-4 col-xl-6">
        <div class="left_box single-filter" style="display: flex">
          <select class="custom-select large-size" onchange="pickOption()">
            <option selected hidden>请选择分析数据</option>
            <option>示例1</option>
          </select>
        </div>
      </div>
    </div>
    <div class="col-xl-12">
      <div class="card blank">
        <div class="card-body p-0 blank-body">
          <div class="edit_online">
            <div class="edit_name">
              <span>接口说明：</span><span>验证码秒级返回，人工智能自我学习自我完善识别系统字符，告别低效人力获取验证码，可通过API接口获取验证码识别结果。
              </span>
            </div>
            <div class="captcha_pick">
              <div class="pick_all radio_btn">
                <input type="checkbox" class="radio" value="0" onclick="checkboxAllOnclick(this)" /><span>全选</span>
              </div>
              <div class="radio_list">
                <div class="radio_item">
                  <div class="captcha">
                    <img src="" alt="" />
                  </div>
                  <div class="pick_box">
                    <input type="checkbox" class="radio pick_one" value="1" onclick="checkboxOnclick(this,0)" />
                  </div>
                </div>
                <div class="radio_item">
                  <div class="captcha">
                    <img src="" alt="" />
                  </div>
                  <div class="pick_box">
                    <input type="checkbox" class="radio pick_one" value="2" onclick="checkboxOnclick(this,1)" />
                  </div>
                </div>
                <div class="radio_item">
                  <div class="captcha">
                    <img src="" alt="" />
                  </div>
                  <div class="pick_box">
                    <input type="checkbox" class="radio pick_one" value="3" onclick="checkboxOnclick(this,2)" />
                  </div>
                </div>
                <div class="radio_item">
                  <div class="captcha">
                    <img src="" alt="" />
                  </div>
                  <div class="pick_box">
                    <input type="checkbox" class="radio pick_one" value="4" onclick="checkboxOnclick(this,3)" />
                  </div>
                </div>
                <div class="radio_item">
                  <div class="captcha">
                    <img src="" alt="" />
                  </div>
                  <div class="pick_box">
                    <input type="checkbox" class="radio pick_one" value="5" onclick="checkboxOnclick(this,4)" />
                  </div>
                </div>
                <div class="radio_item">
                  <div class="captcha">
                    <img src="" alt="" />
                  </div>
                  <div class="pick_box">
                    <input type="checkbox" class="radio pick_one" value="6" onclick="checkboxOnclick(this,5)" />
                  </div>
                </div>
                <div class="radio_item">
                  <div class="captcha">
                    <img src="" alt="" />
                  </div>
                  <div class="pick_box">
                    <input type="checkbox" class="radio pick_one" value="7" onclick="checkboxOnclick(this,6)" />
                  </div>
                </div>
                <div class="radio_item">
                  <div class="captcha">
                    <img src="" alt="" />
                  </div>
                  <div class="pick_box">
                    <input type="checkbox" class="radio pick_one" value="8" onclick="checkboxOnclick(this,7)" />
                  </div>
                </div>
                <div class="radio_item">
                  <div class="captcha">
                    <img src="" alt="" />
                  </div>
                  <div class="pick_box">
                    <input type="checkbox" class="radio pick_one" value="9" onclick="checkboxOnclick(this,8)" />
                  </div>
                </div>
                <div class="radio_item">
                  <div class="captcha">
                    <img src="" alt="" />
                  </div>
                  <div class="pick_box">
                    <input type="checkbox" class="radio pick_one" value="10" onclick="checkboxOnclick(this,9)" />
                  </div>
                </div>
                <div class="radio_item">
                  <div class="captcha">
                    <img src="" alt="" />
                  </div>
                  <div class="pick_box">
                    <input type="checkbox" class="radio pick_one" value="11" onclick="checkboxOnclick(this,10)" />
                  </div>
                </div>
                <div class="radio_item">
                  <div class="captcha">
                    <img src="" alt="" />
                  </div>
                  <div class="pick_box">
                    <input type="checkbox" class="radio pick_one" value="12" onclick="checkboxOnclick(this,11)" />
                  </div>
                </div>
              </div>
            </div>
            <div class="upload_captcha hide_upload">
              <div class="upload_image"><img src="" alt=""></div>
            </div>
            <div class="row row-bottom">
              <div class="col-sm-4 col-xl-6">
                <div class="analysis_name btn btn-primary">在线分析</div>
              </div>
              <div class="col-sm-4 col-xl-6" style="display: flex; justify-content: end; align-items: end">
                <div class="upload_btn">
                  <input type="file" id="upload_file" onchange="getUploadImage()" accept=".bmp,.jpg,.png,jpeg" />
                  上传验证码
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="">
        <div class="analysis_item">
          <div class="item_name">在线识别结果</div>
          <div class="card mt-1">
            <div class="card-body blank-body">
              <div class="operate_tip">
                请选择验证码后点击 “在线分析” 按钮对验证码进行识别
              </div>
              <div class="identify_result hide"></div>
            </div>
          </div>
        </div>
        <div class="analysis_item">
          <div class="item_name">接口请求地址</div>
          <div class="card mt-1">
            <div class="card-body">
              <ul class="nav nav-tabs">
                <li class="nav-item">
                  <a href="#addressParameter" data-toggle="tab" aria-expanded="false" class="nav-link active">
                    <span class="d-block d-sm-none"><i class="uil-file-upload-alt"></i></span>
                    <span class="d-none d-sm-block">请求参数</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="#addressExample" data-toggle="tab" aria-expanded="true" class="nav-link">
                    <span class="d-block d-sm-none"><i class="uil-file-alt"></i></span>
                    <span class="d-none d-sm-block">请求密钥</span>
                  </a>
                </li>
              </ul>
              <div class="tab-content p-3 text-muted">
                <div class="tab-pane show active" id="addressParameter">
                  <div class="table-responsive">
                    <table class="table table-hover table-nowrap mb-0">
                      <thead>
                        <tr>
                          <th>名称</th>
                          <th>请求示例</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>请求地址</td>
                          <td>
                            <a class="request_address" target="_blank"></a>
                          </td>
                        </tr>
                        <tr>
                          <td>请求方式</td>
                          <td>post</td>
                        </tr>
                        <tr>
                          <td>请求类型</td>
                          <td>body</td>
                        </tr>
                        <tr>
                          <td>请求格式</td>
                          <td>form-data</td>
                        </tr>
                        <tr>
                          <td>批量请求</td>
                          <td>不支持</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="tab-pane" id="addressExample">
                  <div class="table-responsive">
                    <table class="table table-hover table-nowrap mb-0">
                      <thead>
                        <tr>
                          <th>名称</th>
                          <th>请求示例</th>

                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>secret-id</td>
                          <td class="secret_id"></td>
                        </tr>
                        <tr>
                          <td>secret-key</td>
                          <td class="secret_key"></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="analysis_item">
          <div class="item_name">接口请求参数</div>
          <div class="card mt-1">
            <div class="card-body">
              <ul class="nav nav-tabs">
                <li class="nav-item">
                  <a href="#parameter" data-toggle="tab" aria-expanded="false" class="nav-link active">
                    <span class="d-block d-sm-none"><i class="uil-file-upload-alt"></i></span>
                    <span class="d-none d-sm-block">请求参数</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="#example" data-toggle="tab" aria-expanded="true" class="nav-link">
                    <span class="d-block d-sm-none"><i class="uil-file-alt"></i></span>
                    <span class="d-none d-sm-block">请求示例</span>
                  </a>
                </li>
              </ul>
              <div class="tab-content p-3 text-muted">
                <div class="tab-pane show active" id="parameter">
                  <div class="table-responsive">
                    <table class="table table-hover table-nowrap mb-0">
                      <thead>
                        <tr>
                          <th>请求参数</th>
                          <th>数据类型</th>
                          <th>描述</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>images</td>
                          <td>binary</td>
                          <td>
                            待查询的验证码图片base64。验证码图片大小必须在10M以内，支持jpg/png/bmp/jpeg格式。
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="tab-pane" id="example">
                  <pre id="result"></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="analysis_item">
          <div class="item_name">接口返回内容</div>
          <div class="card mt-1">
            <div class="card-body">
              <ul class="nav nav-tabs">
                <li class="nav-item">
                  <a href="#returnparameter" data-toggle="tab" aria-expanded="false" class="nav-link active">
                    <span class="d-block d-sm-none"><i class="uil-file-upload-alt"></i></span>
                    <span class="d-none d-sm-block">返回结果</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="#returnexample" data-toggle="tab" aria-expanded="true" class="nav-link">
                    <span class="d-block d-sm-none"><i class="uil-file-alt"></i></span>
                    <span class="d-none d-sm-block">返回示例</span>
                  </a>
                </li>
              </ul>
              <div class="tab-content p-3 text-muted">
                <div class="tab-pane show active" id="returnparameter">
                  <div class="table-responsive">
                    <table class="table table-hover table-nowrap mb-0">
                      <thead>
                        <tr>
                          <th>返回参数</th>
                          <th>数据类型</th>
                          <th>描述</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>text</td>
                          <td>string</td>
                          <td>验证码识别内容</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="tab-pane" id="returnexample">
                  <pre id="returnresult"></pre>

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="/dist/assets/libs/apexcharts/apexcharts.min.js"></script>

    <script src="/dist/assets/js/public.js"></script>
    <script src="/dist/assets/js/opticalCharacters/captchaIdentify.js"></script>

    <script>
      var captchaList = ["/file/captcha/1.png", "/file/captcha/2.png", "/file/captcha/3.png", "/file/captcha/4.png", "/file/captcha/5.png", "/file/captcha/6.png", "/file/captcha/7.png", "/file/captcha/8.png", "/file/captcha/9.png", "/file/captcha/10.png", "/file/captcha/11.png", "/file/captcha/12.png"];
      $(".captcha img").each(function (index) {
        $(this).attr("src", staticPath + captchaList[index])
      })
      $(".request_address").attr("href", requestAddress + "/captcha")
      $(".request_address").html(requestAddress + "/captcha")

      //所有单选选中 全选选中
      var checkboxValue = []; //所有选择框的状态
      function checkboxOnclick(checkbox, index) {
        checkboxValue = [];
        $(".pick_one").each(function () {
          checkboxValue.push(this.checked);
        });
        if (checkboxValue.indexOf(false) == -1) {
          $(".pick_all input").prop("checked", true);
        } else {
          $(".pick_all input").prop("checked", false);
        }

        if ($(".pick_one").eq(index).prop("checked")) {
          checkboxValue[index] = true;
        } else {
          checkboxValue[index] = false;
        }
      }

      //全选选中 所有单选选中
      function checkboxAllOnclick(checkboxAll) {
        checkboxValue = [];
        if (checkboxAll.checked) {
          $(".pick_one").each(function () {
            $(this).prop("checked", true);
            checkboxValue.push(true);
          });
        } else {
          $(".pick_one").each(function () {
            $(this).prop("checked", false);
            checkboxValue.push(false);
          });
        }
      }

      var captchaTexts = [
        "0300",
        "jepv",
        "御捂搂瞻",
        "LBTYUF",
        "f233g",
        "2AMLyA",
        "aAbd",
        "2BGHZ",
        "6K9D",
        "2A8R",
        "九乘六等于？",
        "aAbd",
      ];

      function renderResult(result, size) {
        //4个一组切割数组
        var arrgroup = [];
        var start, end;
        for (let i = 0; i < Math.ceil(result.length / size); i++) {
          start = i * size;
          end = start + size;
          arrgroup.push(result.slice(start, end));
        }

        //渲染识别结果
        var captchaGroup = "";
        arrgroup.forEach((arr) => {
          var captchaRow = "";
          arr.forEach((item) => {
            captchaRow += `<span class="captcha_text">${item}</span>`;
          });
          captchaGroup += '<div class="captcha_row">' + captchaRow + "</div>";
        });
        $(".identify_result").html(captchaGroup);
      }



      function previewPic(file) {
        var reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = function (e) {
          // console.log(e.target.result);
          //图片路径设置为读取的图片
          $(".upload_image img").attr("src", e.target.result)
        };
      }

      //上传验证码
      var isUserupload = false;//是否为用户上传的验证码
      function getUploadImage() {
        var uploadFile = document.querySelector("#upload_file");
        var file = uploadFile.files[0]; //文件
        var size = file.size / 1024 / 1024;
        if (file) {
          isUserupload = true;
          if (size < 10) {
            $(".captcha_pick").addClass("hide_upload");
            $(".upload_captcha").removeClass("hide_upload");
            previewPic(file);

          } else {
            $(".message-error .message_content").html("上传的图片大小不能超过10M");
            $(".message-error").removeClass("message-hide");
            setTimeout(() => {
              $(".message-error").addClass("message-hide");
            }, 2000);
          }

        }
      }
    </script>
</body>

</html>