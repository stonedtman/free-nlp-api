<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title></title>
  <script>
    try {
      if (isindex) {
      }
    } catch (e) {
      window.location.href = "/dist/index.html";
    }
  </script>

  <link rel="stylesheet" href="/dist/assets/css/publicChatGPT/index.css" />
  <link href="/dist/assets/css/public.css" rel="stylesheet" />

  <style>
    .conversation-list {
      overflow: auto;
    }

    .chat-input-box {
      position: relative;
    }

    .bracing-box {
      visibility: hidden;
      padding: 0.5rem 0.75rem;
      font-size: 0.875rem;
      line-height: 1.5;
      border: 1px solid #e2e7f1;
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
    }

    textarea.form-control {
      height: 39px;
    }

    .form-check-input {
      width: 16px;
      height: 16px;
    }

    .form-check-label {
      font-weight: normal;
      margin-top: 0.15rem;
    }

    .answer-text {
      margin-top: 3px;
    }

    .pre-wrap {
      /* 当文本中有<br/>或者换行符，才会换行 */
      white-space: pre-wrap;
    }

    .ctext-wrap {
      max-width: 100%;
    }
  </style>
</head>

<body>
  <div>
    <div class="row page-title align-items-center">
      <div class="col-sm-4 col-xl-6">
        <h4 class="mb-1 mt-0">公域GPT</h4>
      </div>
    </div>
    <div class="col-xl-12">
      <div class="card blank">
        <div class="card-body p-0 blank-body">
          <div class="edit_online">
            <div class="edit_name">
              <span>接口说明：</span><span>ChatGLM是ChatGPT本地化部署平替方案。可以推断出文本之间的关系和逻辑，并根据用户的问题来提供恰当的回答，并能够自然的理解语义和生成文本。
              </span>
            </div>
            <div class="chat_item">
              <div class="chat_item_left">
                <div class="chat_item_title">对话内容</div>
                <div class="chat-conversation public-chat">
                  <ul class="conversation-list slimscroll" style="max-height: 328px">
                    <li class="clearfix">
                      <div class="chat-avatar">
                        <img src="/dist/assets/images/chatGPT.png" alt="Female" />
                        <i class="current-time"></i>
                      </div>
                      <div class="conversation-text">
                        <div class="ctext-wrap">
                          <i>公域GPT</i>
                          <p>Hello!你好，我是公域GPT</p>
                        </div>
                      </div>
                    </li>
                    <li class="clearfix">
                      <div class="chat-avatar">
                        <img src="/dist/assets/images/chatGPT.png" alt="female" />
                        <i class="current-time"></i>
                      </div>
                      <div class="conversation-text">
                        <div class="ctext-wrap">
                          <i>公域GPT</i>
                          <p>
                            您可以问我任何的开放式问题，我会尽我所能的回答您。
                          </p>
                        </div>
                      </div>
                    </li>
                  </ul>
                  <form onsubmit="return false;" class="needs-validation mt-3" novalidate name="chat-form"
                    id="chat-form">
                    <div class="row">
                      <div class="col">
                        <div class="chat-input-box">
                          <div class="bracing-box"></div>
                          <textarea class="form-control chat-input" placeholder="输入您的开放式问题..."
                            style="resize: none"></textarea>
                        </div>
                        <div class="invalid-feedback">输入您的开放式问题</div>
                      </div>
                      <div class="col-auto">
                        <button class="btn btn-danger chat-send btn-block waves-effect waves-light"
                          onclick="sendMessage()">
                          发送
                        </button>
                      </div>
                    </div>
                  </form>
                </div>
              </div>

              <div class="chat_item_right">
                <div class="chat_item_top">
                  <div class="chat_item_title">对话应用场景</div>
                  <div class="chat_item_change">
                    <div class="form-check" data-toggle="tooltip" data-placement="left" title="至多展示五轮">
                      <input class="form-check-input dialogue_change" type="checkbox" value="" id="flexCheckDefault" />
                      <label class="form-check-label" for="flexCheckDefault">
                        支持多轮对话
                      </label>
                    </div>
                  </div>
                </div>

                <div class="chat-scenario">
                  <div class="scenario-title">场景列表</div>
                  <div class="scenario-list">
                    <div class="scenario-list-item">
                      <div class="scenario-name">1.创作剧本</div>
                      <div class="examples_pick">
                        <span>示例1</span>
                      </div>
                    </div>
                    <div class="scenario-list-item">
                      <div class="scenario-name">2.写代码</div>
                      <div class="examples_pick">
                        <span>示例1</span><span>示例2</span>
                      </div>
                    </div>
                    <div class="scenario-list-item">
                      <div class="scenario-name">3.提纲写作</div>
                      <div class="examples_pick">
                        <span>示例1</span><span>示例2</span>
                      </div>
                    </div>
                    <div class="scenario-list-item">
                      <div class="scenario-name">4.文案写作</div>
                      <div class="examples_pick">
                        <span>示例1</span><span>示例2</span>
                      </div>
                    </div>
                    <div class="scenario-list-item">
                      <div class="scenario-name">5.邮件写作助手</div>
                      <div class="examples_pick">
                        <span>示例1</span><span>示例2</span>
                      </div>
                    </div>
                    <div class="scenario-list-item">
                      <div class="scenario-name">6.信息抽取</div>
                      <div class="examples_pick">
                        <span>示例1</span><span>示例2</span>
                      </div>
                    </div>
                    <div class="scenario-list-item">
                      <div class="scenario-name">7.认知训练</div>
                      <div class="examples_pick">
                        <span>示例1</span><span>示例2</span><span>示例3</span>
                      </div>
                    </div>
                    <div class="scenario-list-item">
                      <div class="scenario-name">8.求解数学题</div>
                      <div class="examples_pick">
                        <span>示例1</span><span>示例2</span>
                      </div>
                    </div>
                    <div class="scenario-list-item">
                      <div class="scenario-name">9.评论比较</div>
                      <div class="examples_pick">
                        <span>示例1</span><span>示例2</span>
                      </div>
                    </div>
                    <div class="scenario-list-item">
                      <div class="scenario-name">10.逻辑换算</div>
                      <div class="examples_pick"><span>示例1</span></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="analysis_online">
      <div class="analysis_item">
        <div class="item_name">接口请求地址</div>
        <div class="card mt-1">
          <div class="card-body">
            <ul class="nav nav-tabs">
              <li class="nav-item">
                <a href="#addressParameter" data-toggle="tab" aria-expanded="false" class="nav-link active">
                  <span class="d-block d-sm-none"><i class="uil-file-upload-alt"></i></span>
                  <span class="d-none d-sm-block">请求参数</span>
                </a>
              </li>
              <li class="nav-item">
                <a href="#addressExample" data-toggle="tab" aria-expanded="true" class="nav-link">
                  <span class="d-block d-sm-none"><i class="uil-file-alt"></i></span>
                  <span class="d-none d-sm-block">请求密钥</span>
                </a>
              </li>
            </ul>
            <div class="tab-content p-3 text-muted">
              <div class="tab-pane show active" id="addressParameter">
                <div class="table-responsive">
                  <table class="table table-hover table-nowrap mb-0">
                    <thead>
                      <tr>
                        <th>名称</th>
                        <th>请求示例</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>请求地址</td>
                        <td>
                          <a class="request_address" target="_blank"></a> 或
                          <a class="request_address" target="_blank"></a>
                        </td>
                      </tr>
                      <tr>
                        <td>请求方式</td>
                        <td>websocket 或 post</td>
                      </tr>
                      <tr>
                        <td>请求类型</td>
                        <td>body</td>
                      </tr>
                      <tr>
                        <td>请求格式</td>
                        <td>JSON</td>
                      </tr>
                      <tr>
                        <td>批量请求</td>
                        <td>不支持</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="tab-pane" id="addressExample">
                <div class="table-responsive">
                  <table class="table table-hover table-nowrap mb-0">
                    <thead>
                      <tr>
                        <th>名称</th>
                        <th>请求示例</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Sec-Websocket-Protocol</td>
                        <td class="secret_obj"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="analysis_item">
        <div class="item_name">接口请求参数</div>
        <div class="card mt-1">
          <div class="card-body">
            <ul class="nav nav-tabs">
              <li class="nav-item">
                <a href="#parameter" data-toggle="tab" aria-expanded="false" class="nav-link active">
                  <span class="d-block d-sm-none"><i class="uil-file-upload-alt"></i></span>
                  <span class="d-none d-sm-block">请求参数</span>
                </a>
              </li>
              <li class="nav-item">
                <a href="#example" data-toggle="tab" aria-expanded="true" class="nav-link">
                  <span class="d-block d-sm-none"><i class="uil-file-alt"></i></span>
                  <span class="d-none d-sm-block">请求示例</span>
                </a>
              </li>
            </ul>
            <div class="tab-content p-3 text-muted">
              <div class="tab-pane show active" id="parameter">
                <div class="table-responsive">
                  <table class="table table-hover table-nowrap mb-0">
                    <thead>
                      <tr>
                        <th>请求参数</th>
                        <th>数据类型</th>
                        <th>描述</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>question</td>
                        <td>string</td>
                        <td>请求发送的问题内容。</td>
                      </tr>
                      <tr>
                        <td>count</td>
                        <td>int</td>
                        <td>多轮对话的轮数</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="tab-pane" id="example">
                <pre id="result"></pre>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="analysis_item">
        <div class="item_name">接口返回内容</div>
        <div class="card mt-1">
          <div class="card-body">
            <ul class="nav nav-tabs">
              <li class="nav-item">
                <a href="#returnparameter" data-toggle="tab" aria-expanded="false" class="nav-link active">
                  <span class="d-block d-sm-none"><i class="uil-file-upload-alt"></i></span>
                  <span class="d-none d-sm-block">返回结果</span>
                </a>
              </li>
              <li class="nav-item">
                <a href="#returnexample" data-toggle="tab" aria-expanded="true" class="nav-link">
                  <span class="d-block d-sm-none"><i class="uil-file-alt"></i></span>
                  <span class="d-none d-sm-block">返回示例</span>
                </a>
              </li>
            </ul>
            <div class="tab-content p-3 text-muted">
              <div class="tab-pane show active" id="returnparameter">
                <div class="table-responsive">
                  <table class="table table-hover table-nowrap mb-0">
                    <thead>
                      <tr>
                        <th>返回参数</th>
                        <th>数据类型</th>
                        <th>描述</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>text</td>
                        <td>string</td>
                        <td>AI问答机器人回答内容</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="tab-pane" id="returnexample">
                <pre id="returnresult"></pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <script src="/dist/assets/js/public.js"></script>
  <script src="/dist/assets/js/pcm-player.js"></script>
  <!-- xss过滤html内容 -->
  <script src="/dist/assets/js/xss.js"></script>
  <script src="/dist/assets/js/publicChatGPT/index.js"></script>

  <script>

    $(".request_address").eq(0).attr("href", wsAPI + "/api/publicChatGLM");
    $(".request_address").eq(0).html(wsAPI + "/api/publicChatGLM");
    $(".request_address").eq(1).attr("href", requestAddress + "/chatGLM");
    $(".request_address").eq(1).html(requestAddress + "/chatGLM");

    $(".chat-input").on("input", function () {
      var inputValue = filterXSS($(".chat-input").val());
      $(".bracing-box").html(inputValue);
      var bracingHeight = $(".bracing-box").css("height");
      if (bracingHeight.split("px")[0] > 38) {
        $(".chat-input").css("height", bracingHeight);
      } else {
        $(".chat-input").css("height", "39px");
      }
      // if (inputValue.length > 5000) {
      //   $(".message-error .message_content").html(
      //     "输入的内容字数不能超过5000"
      //   );
      //   $(".message-error").removeClass("message-hide");
      //   setTimeout(() => {
      //     $(".message-error").addClass("message-hide");
      //   }, 2000);
      // }
    });

    var sendTime;
    function getCurrentTime() {
      var myDate = new Date();
      var hours = myDate.getHours();
      if (hours < 10) {
        hours = "0" + JSON.stringify(hours);
      }
      var minutes = myDate.getMinutes();
      if (minutes < 10) {
        minutes = "0" + JSON.stringify(minutes);
      }
      sendTime = hours + ":" + minutes;
    }
    getCurrentTime();
    $(".current-time").each(function () {
      $(this).html(sendTime);
    });

    var exampleList = [
      ["写一个中文谍战剧本，故事发生在二战欧洲战场，双面间谍"],
      [
        "写一段jdbc查询MySQL学生表的代码",
        "用python帮忙写个冒泡排序算法的代码，再给一个数组作为例子，写个测试程序",
      ],
      ["请帮我写一个新材料行业会议邀请提纲", "写10条阿里云热评文案"],
      [
        "请用#插上科学的翅膀飞，作文主题，文章的内容想象力，要有创作性，要符合小学生的优质作文水平，生成一段300个字的作文",
        "类型#汽车“颜色#白色“风格#简约“发动机#V8“样式#中国，生成一段文案500个字的文案",
      ],
      [
        "请帮我写封邮件给暴雪公司，控诉他们无端与网易公司解除合作，中国玩家对他们这种行为非常失望。要求他们立刻改正错误，保护中国玩家权益。言辞恳切严厉。",
        "帮我给微积分课老师写封道歉信，说明一下我今天可能会在微积分课上打瞌睡的事实，并说我万一睡着了之后一定好好复习补习",
      ],
      [
        "谁是这个项目的中标公司？项目名称：中国银行股份有限公司江苏省分行2022年舆情数据服务采购项目，项目编号：JSTCC2200514695，项目金额：18万，采购人：中国银行股份有限公司江苏省分行，采购代理机构：江苏省招标中心有限公司，二、成交供应商候选人，中标公司：上海安硕信息技术股份有限公司，三、联系方式，采购代理机构：江苏省招标中心有限公司，地址：南京市鼓楼区郑和中路118号，联系人：徐悦、叶逢春，电话：025-83240905、13584060515，电子函件：yefc@jitc.cn，江苏省招标中心有限公司，2023年1月9日",
        "2022年11月4日，计算机系通过线上线下相结合的方式在东主楼10-103会议室召开博土研究生导师交流会。计算机学科学位分委员会主席孙茂松，计算机副主任武永卫、党委副书记韩文张出席会议，博士生研究生导师和教学办工作人员等30余人参加会议，会议由武永卫主持。提取“人”(name,position)，“时间”“事件”“地点”类型的实体，并输出JSON格式",
      ],
      [
        "怎么给你输入正确的知识？",
        "百度公司的创始人是李彦宏，你记住了吗？",
        "百度公司的创始人是谁？",
      ],
      [
        "学校食堂运来19吨煤，已经烧了16吨，平均每天烧0.4吨，剩下的煤每天烧0.3吨，还要几天烧完？给出求解步骤。",
        "一列火车和一列慢车，同时分别从甲乙两地相对开出。快车每小时行 75 千米，慢车每小时行 65 米，相遇时快车比慢车多行了 40 千米，甲两地相距多少米?",
      ],
      ["小米和华为哪个性价比更高？", "马化腾和马云，谁更厉害？"],
      ["蒸一个包子需要10分钟，蒸十个包子需要多少分钟？"],
    ];


    $(".scenario-list-item").each(function (index) {
      $(this).on("click", function () {
        $(".scenario-list-item").each(function () {
          $(this).removeClass("active");
          $(this)
            .find("span")
            .each(function () {
              $(this).removeClass("actived");
            });
        });
        $(".scenario-list-item").eq(index).addClass("active");
        $(".scenario-list-item")
          .eq(index)
          .find("span")
          .eq(0)
          .addClass("actived");

        $(".bracing-box").html(exampleList[index][0]);
        var bracingHeight = $(".bracing-box").css("height");
        if (bracingHeight.split("px")[0] > 39) {
          $(".chat-input").css("height", bracingHeight);
        } else {
          $(".chat-input").css("height", "39px");
        }
        $(".chat-input").val(exampleList[index][0]);
        event.stopPropagation();
      });
    });

    $(".examples_pick").each(function (current) {
      $(this)
        .find("span")
        .each(function (index) {
          $(this).on("click", function () {
            $(".scenario-list-item").each(function () {
              $(this).removeClass("active");
            });
            $(".examples_pick").eq(current).parent().addClass("active");
            $(".examples_pick span").each(function () {
              $(this).removeClass("actived");
            });
            $(".examples_pick")
              .eq(current)
              .find("span")
              .eq(index)
              .addClass("actived");

            $(".bracing-box").html(exampleList[current][index]);
            var bracingHeight = $(".bracing-box").css("height");
            if (bracingHeight.split("px")[0] > 39) {
              $(".chat-input").css("height", bracingHeight);
            } else {
              $(".chat-input").css("height", "39px");
            }
            $(".chat-input").val(exampleList[current][index]);
            event.stopPropagation();
          });
        });
    });

  </script>
</body>

</html>